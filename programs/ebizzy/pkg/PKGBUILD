# Maintainer: Masami Ichikawae <masami256@gmail.com>
# vim:set ts=2 sw=2 et filetype=sh:
pkgname=ebizzy
pkgver=0.3
pkgrel=2
pkgdesc="Generate a workload resembling common web application server workloads."
arch=('i386' 'x86_64' 'aarch64')
url="http://ebizzy.sourceforge.net/"
license=('GPL2')
depends=('glibc')
source=("http://downloads.sourceforge.net/project/ebizzy/ebizzy/$pkgver/$pkgname-$pkgver.tar.gz" "0001-$pkgname.patch")
md5sums=('af038bc506066bb3d28db08aba62bc38' 'SKIP')

. $LKP_SRC/lib/install.sh
. $LKP_SRC/lib/tests/pkgbuild.sh

prepare()
{
	prepare_benchmark_path
	rename_versioned_src_pkg_dir
}

patch_source()
{
    cd_src_pkg_dir

    patch -p1 < $srcdir/0001-$pkgname.patch
}

build()
{
    cd_src_pkg_dir

    ./configure
    make
}

package()
{
    cd_src_pkg_dir

    mkdir -p "$benchmark_path/usr/share/licenses/$pkgname"
    mkdir -p "$benchmark_path/usr/share/$pkgname"

    install -D -m 755 -o root -g root "$pkgname" "$benchmark_path/$pkgname"
    install -D -m 644 -o root -g root "LICENSE" "$benchmark_path/usr/share/licenses/$pkgname/LICENSE"
    install -D -m 644 -o root -g root "README" "$benchmark_path/usr/share/$pkgname/README"
}
