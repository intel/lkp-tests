pkgname=perf
pkgver=git
pkgrel=1
url='https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git'
arch=('i386' 'x86_64' 'riscv64' 'aarch64')
license=('GPL')
source=('https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git')
md5sums=('SKIP')

. $LKP_SRC/lib/env.sh
. $LKP_SRC/lib/tests/pkgbuild.sh

prepare()
{
	prepare_benchmark_path
}

build()
{
	cd_src_pkg_dir linux/tools/perf

	# NO_JEVENTS=1 to support python older than 3.6
	# NO_LIBTRACEEVENT=1 to support the distributions which have no libtraceevent
	NO_JEVENTS=1 NO_LIBTRACEEVENT=1 make
}

package()
{
	pack_contents $srcdir/linux/tools/perf/perf $benchmark_path
}
