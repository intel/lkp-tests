pkgname=tlbflush
pkgver=1
pkgrel=1
arch=('i386' 'x86_64' 'aarch64')
license=('GPL')
source=('tlbflush.c')
sha256sums=('SKIP')

. $LKP_SRC/lib/install.sh
. $LKP_SRC/lib/tests/pkgbuild.sh

prepare()
{
	prepare_benchmark_path
}

build()
{
	cd "$srcdir"

	gcc -DFILE_SIZE=$((128*1048576)) -g -O2 "${pkgname}.c" -lpthread -o "${pkgname}"
}

package()
{
	pack_contents "$srcdir/$pkgname" "$benchmark_path"
}
