pkgname=kernbench
pkgver=0.50
pkgrel=1
url='http://ck.kolivas.org/apps/kernbench/kernbench-0.50'
arch=('i386' 'x86_64' 'aarch64')
license=('GPL')
kernel_ver=5.9
source=("http://ck.kolivas.org/apps/kernbench/kernbench-$pkgver/kernbench"
	"https://www.kernel.org/pub/linux/kernel/v5.x/linux-${kernel_ver}.tar.xz")
md5sums=('SKIP' 'SKIP')

. $LKP_SRC/lib/tests/pkgbuild.sh

prepare()
{
	prepare_benchmark_path
}

package()
{
	pack_contents "$srcdir/linux-${kernel_ver}/" "$benchmark_path/linux"

	# copy the original file instead of link, so don't use -a option
	# $ ls -lrt $srcdir
	# drwxrwxr-x 24 root root 740 Oct 11  2020 linux-5.9
	# lrwxrwxrwx  1 root root  45 Oct 12 11:15 kernbench -> /lkp/lkp/src/programs/kernbench/pkg/kernbench
	# lrwxrwxrwx  1 root root  52 Oct 12 11:15 linux-5.9.tar.xz -> /lkp/lkp/src/programs/kernbench/pkg/linux-5.9.tar.xz
	cp -f "$srcdir/$pkgname" "$benchmark_path"
	chmod a+x "$benchmark_path/$pkgname"
}
